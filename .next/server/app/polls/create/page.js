(()=>{var e={};e.id=848,e.ids=[848],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},665:e=>{"use strict";e.exports=require("dns")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},5816:e=>{"use strict";e.exports=require("process")},6162:e=>{"use strict";e.exports=require("stream")},4026:e=>{"use strict";e.exports=require("string_decoder")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},8061:e=>{"use strict";e.exports=require("node:assert")},2761:e=>{"use strict";e.exports=require("node:async_hooks")},2254:e=>{"use strict";e.exports=require("node:buffer")},27:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},5714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},5673:e=>{"use strict";e.exports=require("node:events")},8849:e=>{"use strict";e.exports=require("node:http")},2725:e=>{"use strict";e.exports=require("node:http2")},7503:e=>{"use strict";e.exports=require("node:net")},8846:e=>{"use strict";e.exports=require("node:perf_hooks")},5815:e=>{"use strict";e.exports=require("node:querystring")},4492:e=>{"use strict";e.exports=require("node:stream")},9516:e=>{"use strict";e.exports=require("node:tls")},1041:e=>{"use strict";e.exports=require("node:url")},7261:e=>{"use strict";e.exports=require("node:util")},3746:e=>{"use strict";e.exports=require("node:util/types")},4086:e=>{"use strict";e.exports=require("node:worker_threads")},5628:e=>{"use strict";e.exports=require("node:zlib")},9904:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>x,tree:()=>c}),r(7570),r(3578),r(5866);var s=r(3191),o=r(8716),i=r(7922),l=r.n(i),n=r(5231),a={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>n[e]);r.d(t,a);let c=["",{children:["polls",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7570)),"/home/computeruse/Desktop/working_dir/polling/src/app/polls/create/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,3578)),"/home/computeruse/Desktop/working_dir/polling/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],u=["/home/computeruse/Desktop/working_dir/polling/src/app/polls/create/page.tsx"],d="/polls/create/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/polls/create/page",pathname:"/polls/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7854:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},6800:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9404,23)),Promise.resolve().then(r.bind(r,2925))},4221:(e,t,r)=>{Promise.resolve().then(r.bind(r,4545))},5047:(e,t,r)=>{"use strict";var s=r(7389);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},2925:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(326),o=r(7577),i=r(5047),l=r(6499),n=r(4545);function a(){let e=(0,i.useRouter)(),{userId:t}=(0,n.a)(),[r,a]=(0,o.useState)(""),[c,u]=(0,o.useState)(["",""]),[d,p]=(0,o.useState)(!1),[x,m]=(0,o.useState)(""),h=(e,t)=>{let r=[...c];r[e]=t,u(r)},g=e=>{if(c.length<=2)return;let t=[...c];t.splice(e,1),u(t)},v=async t=>{if(t.preventDefault(),m(""),""===r.trim()){m("Please enter a question");return}let s=c.filter(e=>""!==e.trim());if(s.length<2){m("Please provide at least 2 options");return}p(!0);try{let t=await (0,l.wi)({question:r.trim(),options:s});if(t)e.push(`/polls/${t}`);else throw Error("Failed to create poll")}catch(e){console.error("Error creating poll:",e),m("Failed to create poll. Please try again."),p(!1)}};return(0,s.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[x&&s.jsx("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg",children:x}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Question"}),s.jsx("input",{type:"text",id:"question",value:r,onChange:e=>a(e.target.value),placeholder:"Ask a question...",className:"input-field w-full",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Answer Options"}),s.jsx("button",{type:"button",onClick:()=>{u([...c,""])},className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"+ Add Option"})]}),c.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:e,onChange:e=>h(t,e.target.value),placeholder:`Option ${t+1}`,className:"input-field flex-grow",required:t<2}),c.length>2&&s.jsx("button",{type:"button",onClick:()=>g(t),className:"text-gray-400 hover:text-red-500",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},t))]}),s.jsx("div",{className:"pt-4",children:s.jsx("button",{type:"submit",disabled:d,className:`btn-primary w-full ${d?"opacity-50 cursor-not-allowed":""}`,children:d?"Creating Poll...":"Create Poll"})})]})}},4545:(e,t,r)=>{"use strict";r.d(t,{UserProvider:()=>l,a:()=>n});var s=r(326),o=r(7577);let i=(0,o.createContext)(void 0);function l({children:e}){let[t,r]=(0,o.useState)(""),[l,n]=(0,o.useState)(!1);return l?s.jsx(i.Provider,{value:{userId:t},children:e}):null}function n(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},6499:(e,t,r)=>{"use strict";r.d(t,{mB:()=>c,upvotePoll:()=>d,vote:()=>u,wi:()=>a});var s=r(445),o=r(76);if(!s.db)throw Error("Firestore is not initialized");let i=(0,o.collection)(s.db,"polls"),l=(0,o.collection)(s.db,"userVotes"),n=(0,o.collection)(s.db,"userUpvotes");async function a(e){if(!s.db)throw Error("Firestore is not initialized");let t=e.options.map(e=>({id:Math.random().toString(36).substring(2,15),text:e,votes:0}));return(await (0,o.ET)(i,{question:e.question,options:t,upvotes:0,createdAt:Date.now()})).id}async function c(e=20){if(!s.db)throw Error("Firestore is not initialized");try{if(console.log("Querying Firestore for polls..."),!s.db)return console.error("Firestore db is not initialized"),[];let t=(0,o.query)(i,(0,o.Xo)("upvotes","desc"),(0,o.limit)(e)),r=await (0,o.getDocs)(t);return console.log(`Found ${r.docs.length} polls`),r.docs.map(e=>{let t=e.data();return{id:e.id,question:t.question||"",options:t.options||[],upvotes:t.upvotes||0,createdAt:t.createdAt||Date.now()}})}catch(e){return console.error("Error getting polls:",e),[]}}async function u(e,t,r){if(!s.db)throw Error("Firestore is not initialized");if(!s.db)return console.error("Firebase DB not initialized"),!1;let i=(0,o.query)(l,(0,o.ar)("userId","==",e),(0,o.ar)("pollId","==",t));if(!(await (0,o.getDocs)(i)).empty)return!1;let n=(0,o.JU)(s.db,"polls",t),a=await (0,o.QT)(n);if(!a.exists())return!1;let c=a.data().options,u=c.findIndex(e=>e.id===r);return -1!==u&&(c[u].votes=c[u].votes+1,await (0,o.r7)(n,{options:c}),await (0,o.ET)(l,{userId:e,pollId:t,optionId:r,votedAt:Date.now()}),!0)}async function d(e,t){if(!s.db)throw Error("Firestore is not initialized");let r=(0,o.query)(n,(0,o.ar)("userId","==",e),(0,o.ar)("pollId","==",t));if(!(await (0,o.getDocs)(r)).empty)return!1;let i=(0,o.JU)(s.db,"polls",t);return!!(await (0,o.QT)(i)).exists()&&(await (0,o.r7)(i,{upvotes:(0,o.nP)(1)}),await (0,o.ET)(n,{userId:e,pollId:t,upvotedAt:Date.now()}),!0)}},445:(e,t,r)=>{"use strict";r.d(t,{db:()=>a});var s=r(2585),o=r(76),i=r(6791);let l={apiKey:"AIzaSyBtesting123456789",authDomain:"social-poll-app.firebaseapp.com",projectId:"social-poll-app",storageBucket:"social-poll-app.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef123456"};console.log("Firebase Config:",{apiKey:l.apiKey?.substring(0,5)+"...",projectId:l.projectId});let n=null,a=null;try{n=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)(l),a=(0,o.ad)(n),(0,i.v0)(n),console.log("Firebase initialized successfully with project ID:",l.projectId)}catch(e){console.error("Error initializing Firebase:",e),n=null,a=null}},7371:(e,t,r)=>{"use strict";r.d(t,{default:()=>o.a});var s=r(1812),o=r.n(s)},1812:(e,t,r)=>{"use strict";let{createProxy:s}=r(8570);e.exports=s("/home/computeruse/Desktop/working_dir/polling/node_modules/next/dist/client/link.js")},3578:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>a});var s=r(9510),o=r(6713),i=r.n(o);r(5023);var l=r(8570);let n=(0,l.createProxy)(String.raw`/home/computeruse/Desktop/working_dir/polling/src/components/UserProvider.tsx#UserProvider`);(0,l.createProxy)(String.raw`/home/computeruse/Desktop/working_dir/polling/src/components/UserProvider.tsx#useUser`);let a={title:"Social Poll",description:"Create and answer polls in a social format",themeColor:"#101318"};function c({children:e}){return(0,s.jsxs)("html",{lang:"en",className:`${i().variable}`,children:[(0,s.jsxs)("head",{children:[s.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),s.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),s.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap",rel:"stylesheet"})]}),s.jsx("body",{className:"bg-background text-white antialiased",children:s.jsx("div",{className:"min-h-screen",children:s.jsx("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-10",children:s.jsx(n,{children:e})})})})]})}},7570:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(9510),o=r(7371);let i=(0,r(8570).createProxy)(String.raw`/home/computeruse/Desktop/working_dir/polling/src/components/CreatePollForm.tsx#default`);function l(){return(0,s.jsxs)("div",{className:"space-y-8 animate-fade-in",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(o.default,{href:"/polls",className:"text-gray-400 hover:text-accent transition-colors duration-200",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})})}),s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Create a Poll"})]}),s.jsx("div",{className:"rounded-2xl bg-gradient-to-br from-accent/5 to-accent/10 p-0.5 shadow-card backdrop-blur-sm max-w-2xl mx-auto",children:(0,s.jsxs)("div",{className:"bg-card rounded-2xl p-8",children:[s.jsx("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent-subtle flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-accent",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})})}),(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Create Poll"}),s.jsx("p",{className:"text-gray-300 text-sm",children:"Ask a question and create a poll for others to answer"})]})]})}),s.jsx(i,{})]})}),s.jsx("div",{className:"text-center",children:(0,s.jsxs)(o.default,{href:"/polls",className:"text-accent hover:text-accent-light font-medium transition-colors duration-200 inline-flex items-center",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[s.jsx("path",{fillRule:"evenodd",d:"M10.293 15.707a1 1 0 010-1.414L14.586 10l-4.293-4.293a1 1 0 111.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z",clipRule:"evenodd"}),s.jsx("path",{fillRule:"evenodd",d:"M4.293 15.707a1 1 0 010-1.414L8.586 10 4.293 5.707a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z",clipRule:"evenodd"})]}),"View all polls"]})})]})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[340,712],()=>r(9904));module.exports=s})();