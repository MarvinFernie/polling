(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[586],{5765:function(e,s,l){Promise.resolve().then(l.t.bind(l,2972,23)),Promise.resolve().then(l.bind(l,2940))},2940:function(e,s,l){"use strict";l.d(s,{default:function(){return i}});var t=l(7437),a=l(2265),n=l(3562),c=l(8063),r=l(5443);function i(){let{userId:e}=(0,r.a)(),[s,l]=(0,a.useState)([]),[i,d]=(0,a.useState)(!0),[o,h]=(0,a.useState)({}),[x,m]=(0,a.useState)({});return((0,a.useEffect)(()=>{let s=async()=>{try{console.log("Fetching polls...");let s=await (0,n.mB)();if(console.log("Polls fetched:",s),0===s.length&&console.log("No polls found in database. Check if seeding was successful."),l(s),e){let e={},l={};s.forEach(s=>{let t="poll_vote_".concat(s.id),a="poll_upvote_".concat(s.id);e[s.id]=!!localStorage.getItem(t),l[s.id]=!!localStorage.getItem(a)}),h(e),m(l)}}catch(e){console.error("Error fetching polls:",e)}finally{d(!1)}};s();let t=setInterval(s,5e3);return()=>clearInterval(t)},[e]),i)?(0,t.jsx)("div",{className:"space-y-6",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"card animate-pulse overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex justify-between mb-6",children:[(0,t.jsx)("div",{className:"h-6 bg-surface-light rounded-lg w-2/3"}),(0,t.jsx)("div",{className:"h-8 w-16 bg-surface-light rounded-full"})]}),(0,t.jsx)("div",{className:"space-y-4 mb-6",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-16 bg-surface rounded-xl border border-border"},e))}),(0,t.jsx)("div",{className:"h-px bg-border w-full mb-4"}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("div",{className:"h-4 bg-surface-light rounded w-20"}),(0,t.jsx)("div",{className:"h-10 bg-surface-light rounded-lg w-32"})]})]},e))}):0===s.length?(0,t.jsx)("div",{className:"card animate-fade-in overflow-hidden",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-surface mb-6",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("h3",{className:"text-xl font-medium text-white mb-3",children:"No polls found"}),(0,t.jsx)("p",{className:"text-gray-300 max-w-md mx-auto mb-6",children:"Polls have been seeded but aren't showing up yet. Try these steps:"}),(0,t.jsx)("div",{className:"bg-surface rounded-xl border border-border p-6 max-w-lg mx-auto mb-6",children:(0,t.jsxs)("ul",{className:"text-left space-y-3 mb-0 text-gray-300",children:[(0,t.jsxs)("li",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-accent-subtle flex items-center justify-center mt-0.5",children:(0,t.jsx)("span",{className:"text-xs font-bold text-accent",children:"1"})}),(0,t.jsx)("span",{children:"Check the console for Firebase connection errors"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-accent-subtle flex items-center justify-center mt-0.5",children:(0,t.jsx)("span",{className:"text-xs font-bold text-accent",children:"2"})}),(0,t.jsx)("span",{children:"Return to the home page and try seeding the database again"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-accent-subtle flex items-center justify-center mt-0.5",children:(0,t.jsx)("span",{className:"text-xs font-bold text-accent",children:"3"})}),(0,t.jsx)("span",{children:"Verify that your Firebase configuration is correct"})]}),(0,t.jsxs)("li",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-accent-subtle flex items-center justify-center mt-0.5",children:(0,t.jsx)("span",{className:"text-xs font-bold text-accent",children:"4"})}),(0,t.jsx)("span",{children:"Create a new poll to test the database connection"})]})]})}),(0,t.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,t.jsxs)("a",{href:"/",className:"btn-primary inline-flex items-center",children:[(0,t.jsx)("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Return to Home"]}),(0,t.jsxs)("a",{href:"/polls/create",className:"btn-outline inline-flex items-center",children:[(0,t.jsx)("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Create Poll"]})]})]})}):(0,t.jsx)("div",{className:"space-y-6",children:s.map(e=>(0,t.jsx)(c.Z,{poll:e,initialVoted:o[e.id]||!1,initialUpvoted:x[e.id]||!1},e.id))})}}},function(e){e.O(0,[358,139,390,63,971,117,744],function(){return e(e.s=5765)}),_N_E=e.O()}]);