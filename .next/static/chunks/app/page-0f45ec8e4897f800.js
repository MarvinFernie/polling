(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9236:function(e,t,o){Promise.resolve().then(o.t.bind(o,2972,23)),Promise.resolve().then(o.bind(o,9121))},9121:function(e,t,o){"use strict";o.d(t,{default:function(){return c}});var r=o(7437),s=o(2265),n=o(3562);let a=[{question:"What was the best bar at Duke?",options:["Shooters","Devines"]},{question:"Does Brittany Brady have a webbed ass?",options:["Yes","No","I don't believe in picking on Babs"]},{question:"What baby will be born first?",options:["Baby Boy Clanon/Throsby","Baby Boy Samuels/Forman"]}];async function i(){try{if(console.log("Starting to seed sample polls..."),!await l())return console.error("❌ Cannot connect to Firestore. Check your Firebase configuration."),!1;let e=0;for(let t of a)try{console.log("Creating poll: ".concat(t.question));let o=await (0,n.wi)({question:t.question,options:t.options});o?(console.log("✅ Created poll with ID: ".concat(o)),e++):console.error("❌ Failed to create poll: ".concat(t.question)),await new Promise(e=>setTimeout(e,1e3))}catch(e){console.error('❌ Error creating poll "'.concat(t.question,'":'),e)}if(e===a.length)return console.log("✅ All ".concat(e," sample polls seeded successfully")),!0;return console.log("⚠️ Partial success: ".concat(e," of ").concat(a.length," polls seeded")),e>0}catch(e){return console.error("❌ Error seeding sample polls:",e),!1}}async function l(){try{let{db:e}=await Promise.resolve().then(o.bind(o,6410));if(!e)return console.error("Firestore db is not initialized"),!1;let{collection:t,getDocs:r,query:s,limit:n}=await Promise.resolve().then(o.bind(o,5978)),a=t(e,"polls");console.log("Testing Firestore connection...");let i=s(a,n(1));return await r(i),console.log("✅ Firestore connection successful"),!0}catch(e){return console.error("❌ Firestore connection test failed:",e),!1}}function c(){let[e,t]=(0,s.useState)(!1),[o,a]=(0,s.useState)("idle"),[l,c]=(0,s.useState)(0),[d,u]=(0,s.useState)([]),[h,p]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{a("checking");let e=await (0,n.mB)();c(e.length),e.length>0?u(t=>[...t,"Found ".concat(e.length," existing polls in database")]):u(e=>[...e,"No polls found in database"]),a("idle")}catch(t){console.error("Error checking polls:",t);let e=t instanceof Error?t.message:"Unknown error";u(t=>[...t,"Error checking polls: ".concat(e)]),a("idle")}})()},[]);let m=e=>{u(t=>[...t,e])},g=async()=>{t(!0),a("checking"),u([]);try{m("Starting database seeding...");let e=console.log,t=console.error;console.log=function(t){for(var o=arguments.length,r=Array(o>1?o-1:0),s=1;s<o;s++)r[s-1]=arguments[s];e(t,...r),"string"==typeof t?m(t):m(String(t))},console.error=function(e){for(var o=arguments.length,r=Array(o>1?o-1:0),s=1;s<o;s++)r[s-1]=arguments[s];t(e,...r),"string"==typeof e?m("ERROR: ".concat(e)):m("ERROR: ".concat(String(e)))};let o=await i();console.log=e,console.error=t,a(o?"success":"error");let r=await (0,n.mB)();c(r.length),m("Final poll count: ".concat(r.length))}catch(t){console.error("Error seeding database:",t);let e=t instanceof Error?t.message:"Unknown error";m("Error seeding database: ".concat(e)),a("error")}finally{t(!1),p(!0)}};return(0,r.jsxs)("div",{className:"rounded-xl border border-border bg-card/90 p-6 mb-8 shadow-card backdrop-blur-sm transition-all duration-300 hover:shadow-elevated animate-fade-in",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-accent-subtle",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-accent",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-white",children:"Seed Database"}),l>0&&(0,r.jsxs)("span",{className:"badge-primary ml-2",children:[l," polls found"]})]}),(0,r.jsx)("p",{className:"text-gray-300 text-sm",children:l>0?"Populate the database with ".concat(l>0?"more":""," sample poll questions"):"Add the three sample poll questions to the database"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("button",{onClick:()=>p(!h),className:"text-sm text-accent hover:text-accent-light transition-colors flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h?"Hide Details":"View Details"]}),(0,r.jsx)("button",{onClick:g,disabled:e||"checking"===o,className:"btn-primary ".concat(e||"checking"===o?"opacity-70 cursor-not-allowed":""),children:e?(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Seeding..."]}):"checking"===o?(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking..."]}):"Seed Database"})]})]}),"success"===o&&(0,r.jsxs)("div",{className:"mt-4 py-3 px-4 bg-accent-subtle rounded-lg border border-accent/30 flex items-start gap-3 animate-fade-in",children:[(0,r.jsx)("svg",{className:"h-5 w-5 text-accent mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-accent-light mb-1",children:"Success!"}),(0,r.jsx)("p",{className:"text-gray-300 text-sm",children:"Sample polls successfully added to the database! Navigate to the Polls page to see them."})]})]}),"error"===o&&(0,r.jsxs)("div",{className:"mt-4 py-3 px-4 bg-error/10 rounded-lg border border-error/30 flex items-start gap-3 animate-fade-in",children:[(0,r.jsx)("svg",{className:"h-5 w-5 text-error mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-error mb-1",children:"Error"}),(0,r.jsx)("p",{className:"text-gray-300 text-sm",children:"Failed to add sample polls. Check the logs below or console for details."})]})]}),h&&d.length>0&&(0,r.jsxs)("div",{className:"mt-4 overflow-hidden animate-fade-in rounded-lg border border-border",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between bg-surface px-4 py-2 border-b border-border",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-gray-300",children:"Process Log"}),(0,r.jsxs)("span",{className:"text-xs text-gray-400",children:[d.length," entries"]})]}),(0,r.jsx)("div",{className:"bg-surface p-3 h-40 overflow-y-auto",children:(0,r.jsx)("pre",{className:"text-xs text-gray-300 font-mono space-y-1",children:d.map((e,t)=>(0,r.jsx)("div",{className:"py-0.5 px-2 rounded ".concat(e.startsWith("ERROR")?"text-error bg-error/10":e.includes("✅")?"text-accent bg-accent/5":""),children:e},t))})})]})]})}},3562:function(e,t,o){"use strict";o.d(t,{Kd:function(){return c},mB:function(){return d},upvotePoll:function(){return h},vote:function(){return u},wi:function(){return l}});var r=o(6410),s=o(5978);if(!r.db)throw Error("Firestore is not initialized");let n=(0,s.collection)(r.db,"polls"),a=(0,s.collection)(r.db,"userVotes"),i=(0,s.collection)(r.db,"userUpvotes");async function l(e){if(!r.db)throw Error("Firestore is not initialized");let t=e.options.map(e=>({id:Math.random().toString(36).substring(2,15),text:e,votes:0}));return(await (0,s.ET)(n,{question:e.question,options:t,upvotes:0,createdAt:Date.now()})).id}async function c(e){if(!r.db)throw Error("Firestore is not initialized");let t=(0,s.JU)(r.db,"polls",e),o=await (0,s.QT)(t);if(!o.exists())return null;let n=o.data();return{id:o.id,...n}}async function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;if(!r.db)throw Error("Firestore is not initialized");try{if(console.log("Querying Firestore for polls..."),!r.db)return console.error("Firestore db is not initialized"),[];let t=(0,s.query)(n,(0,s.Xo)("upvotes","desc"),(0,s.limit)(e)),o=await (0,s.getDocs)(t);return console.log("Found ".concat(o.docs.length," polls")),o.docs.map(e=>{let t=e.data();return{id:e.id,question:t.question||"",options:t.options||[],upvotes:t.upvotes||0,createdAt:t.createdAt||Date.now()}})}catch(e){return console.error("Error getting polls:",e),[]}}async function u(e,t,o){if(!r.db)throw Error("Firestore is not initialized");if(!r.db)return console.error("Firebase DB not initialized"),!1;let n=(0,s.query)(a,(0,s.ar)("userId","==",e),(0,s.ar)("pollId","==",t));if(!(await (0,s.getDocs)(n)).empty)return!1;let i=(0,s.JU)(r.db,"polls",t),l=await (0,s.QT)(i);if(!l.exists())return!1;let c=l.data().options,d=c.findIndex(e=>e.id===o);return -1!==d&&(c[d].votes=c[d].votes+1,await (0,s.r7)(i,{options:c}),await (0,s.ET)(a,{userId:e,pollId:t,optionId:o,votedAt:Date.now()}),!0)}async function h(e,t){if(!r.db)throw Error("Firestore is not initialized");let o=(0,s.query)(i,(0,s.ar)("userId","==",e),(0,s.ar)("pollId","==",t));if(!(await (0,s.getDocs)(o)).empty)return!1;let n=(0,s.JU)(r.db,"polls",t);return!!(await (0,s.QT)(n)).exists()&&(await (0,s.r7)(n,{upvotes:(0,s.nP)(1)}),await (0,s.ET)(i,{userId:e,pollId:t,upvotedAt:Date.now()}),!0)}},6410:function(e,t,o){"use strict";o.d(t,{db:function(){return c}});var r,s=o(738),n=o(5978),a=o(3301);let i={apiKey:"AIzaSyBtesting123456789",authDomain:"social-poll-app.firebaseapp.com",projectId:"social-poll-app",storageBucket:"social-poll-app.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef123456"};console.log("Firebase Config:",{apiKey:(null===(r=i.apiKey)||void 0===r?void 0:r.substring(0,5))+"...",projectId:i.projectId});let l=null,c=null;try{l=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)(i),c=(0,n.ad)(l),(0,a.v0)(l),console.log("Firebase initialized successfully with project ID:",i.projectId)}catch(e){console.error("Error initializing Firebase:",e),l=null,c=null}}},function(e){e.O(0,[358,139,390,971,117,744],function(){return e(e.s=9236)}),_N_E=e.O()}]);